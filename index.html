<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AirMon - Pemantauan Ketinggian Air Real-time</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: Poppins & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Icon Library (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body { background-color: #f8fafc; font-family: 'Poppins', sans-serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        .hero-section { position: relative; color: white; overflow: hidden; display: flex; align-items: center; justify-content: center; background: linear-gradient(160deg, #0c4a6e 0%, #0284c7 100%); }
        .card { background-color: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .btn-primary { background-color: #2563eb; color: white; transition: background-color 0.3s; }
        .btn-primary:hover { background-color: #1d4ed8; }
        .btn-primary:disabled { background-color: #93c5fd; cursor: not-allowed; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .auth-tab[data-state='active'] { border-color: #3b82f6; color: #2563eb; }
        .feature-card { border: 1px solid transparent; transition: all 0.3s ease; }
        .feature-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); border-color: #38bdf8; }
        .icon-wrapper { background-color: #e0f2fe; color: #0ea5e9; }
        .ai-analysis-box { background-color: #eef2ff; border-left: 4px solid #4f46e5; }
    </style>
</head>
<body>

    <!-- ===== LANDING PAGE SECTION ===== -->
    <main id="landing-page-section">
        <header class="absolute top-0 left-0 w-full z-40">
            <div class="container mx-auto px-6 py-5 text-center">
                 <h1 class="text-3xl md:text-4xl font-extrabold tracking-wide">
                    <span class="bg-gradient-to-r from-cyan-300 to-sky-400 bg-clip-text text-transparent">Air</span><span class="text-white">Mon</span>
                 </h1>
            </div>
        </header>
        
        <section class="hero-section h-screen">
            <div class="hero-content container mx-auto px-6 text-center">
                <p class="text-xl md:text-2xl max-w-2xl mx-auto text-sky-100/90 mb-10">Platform modern untuk memantau ketinggian muka air secara presisi dan real-time.</p>
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                    <button class="show-register-btn bg-white text-sky-600 font-bold py-3 px-8 rounded-full text-lg inline-block shadow-lg hover:bg-sky-50 transition transform hover:scale-105 w-full sm:w-auto">Daftar Gratis</button>
                    <button class="show-login-btn text-white font-medium py-3 px-8 rounded-full text-lg w-full sm:w-auto border-2 border-white/50 hover:bg-white/10 transition">Masuk</button>
                </div>
            </div>
        </section>
        <section id="fitur" class="py-20 md:py-28 bg-slate-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-slate-800">Fitur Unggulan Platform</h2>
                    <p class="text-slate-500 mt-3 max-w-2xl mx-auto">Kami menyediakan berbagai fitur canggih untuk memastikan pemantauan air Anda berjalan dengan optimal dan mudah.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card feature-card p-8 text-center"><div class="icon-wrapper w-20 h-20 rounded-full inline-flex items-center justify-center mb-6"><i data-lucide="cloud" class="w-10 h-10"></i></div><h3 class="text-xl font-semibold text-slate-800 mb-3">Database Cloud</h3><p class="text-slate-500">Data disimpan secara real-time di Firebase Firestore, aman dan dapat diakses dari berbagai perangkat.</p></div>
                    <div class="card feature-card p-8 text-center"><div class="icon-wrapper w-20 h-20 rounded-full inline-flex items-center justify-center mb-6"><i data-lucide="pie-chart" class="w-10 h-10"></i></div><h3 class="text-xl font-semibold text-slate-800 mb-3">Grafik Interaktif</h3><p class="text-slate-500">Visualisasikan data TMA dalam grafik dinamis untuk analisis tren yang cepat dan akurat.</p></div>
                    <div class="card feature-card p-8 text-center"><div class="icon-wrapper w-20 h-20 rounded-full inline-flex items-center justify-center mb-6"><i data-lucide="sparkles" class="w-10 h-10"></i></div><h3 class="text-xl font-semibold text-slate-800 mb-3">Analisis AI</h3><p class="text-slate-500">Dapatkan ringkasan dan analisis data Anda secara otomatis dengan kekuatan AI Gemini.</p></div>
                </div>
            </div>
        </section>
        <footer class="bg-slate-800 text-slate-300">
            <div class="container mx-auto px-6 py-8 text-center"><p>&copy; 2024 AirMon. Powered by andri14</p></div>
        </footer>
    </main>

    <!-- ===== AUTHENTICATION SECTION ===== -->
    <main id="auth-section" class="hidden">
        <div class="min-h-screen bg-slate-100 flex flex-col justify-center items-center p-4">
             <div class="w-full max-w-md">
                <div class="card p-8 space-y-6 relative">
                    <button id="back-to-landing-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i data-lucide="x" class="w-6 h-6"></i></button>
                    <div class="border-b border-gray-200"><nav class="-mb-px flex space-x-6"><button id="login-tab" class="auth-tab whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm" data-state="active">Masuk</button><button id="register-tab" class="auth-tab whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700" data-state="inactive">Daftar</button></nav></div>
                    <form id="login-form" class="space-y-4">
                        <h2 class="text-xl font-semibold text-center text-gray-700">Selamat Datang Kembali</h2>
                        <div><label for="login-email" class="block text-sm font-medium text-gray-700">Email</label><input type="email" id="login-email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></div>
                        <div><label for="login-password" class="block text-sm font-medium text-gray-700">Kata Sandi</label><div class="relative mt-1"><input type="password" id="login-password" required class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 pr-10"><button type="button" class="password-toggle absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700"><i data-lucide="eye" class="w-5 h-5"></i></button></div></div>
                        <p id="login-error" class="text-sm text-red-600 hidden"></p>
                        <button type="submit" class="w-full btn-primary font-semibold py-2.5 px-4 rounded-lg shadow-sm">Masuk</button>
                    </form>
                    <form id="register-form" class="space-y-4 hidden">
                        <h2 class="text-xl font-semibold text-center text-gray-700">Buat Akun Baru</h2>
                        <div><label for="register-name" class="block text-sm font-medium text-gray-700">Nama Lengkap</label><input type="text" id="register-name" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></div>
                        <div><label for="register-email" class="block text-sm font-medium text-gray-700">Email</label><input type="email" id="register-email" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></div>
                        <div><label for="register-password" class="block text-sm font-medium text-gray-700">Kata Sandi</label><div class="relative mt-1"><input type="password" id="register-password" required minlength="6" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 pr-10"><button type="button" class="password-toggle absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700"><i data-lucide="eye" class="w-5 h-5"></i></button></div></div>
                        <p id="register-error" class="text-sm text-red-600 hidden"></p>
                        <button type="submit" class="w-full btn-primary font-semibold py-2.5 px-4 rounded-lg shadow-sm">Daftar Akun</button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    
    <!-- ===== DASHBOARD APP SECTION ===== -->
    <main id="dashboard-app-section" class="hidden">
        <div class="font-inter min-h-screen bg-slate-100">
            <header class="bg-white py-4 shadow-md sticky top-0 z-50">
                <div class="container mx-auto px-6 flex justify-between items-center">
                    <h1 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-sky-600 to-cyan-500 bg-clip-text text-transparent">Dashboard</h1>
                    <button id="logout-button" class="text-sm font-medium bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition flex items-center gap-2 shadow-sm"><i data-lucide="log-out" class="w-4 h-4"></i>Keluar</button>
                </div>
            </header>
            <div class="p-4 sm:p-6 lg:p-8">
                <div class="max-w-7xl mx-auto space-y-8">
                    <div id="welcome-message" class="text-xl font-semibold text-gray-700">Memuat...</div>
                    <div id="dashboard-content" class="hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-1 space-y-8">
                                <div class="card p-6"><h2 class="text-xl font-semibold text-gray-700 border-b pb-3 mb-4">Input Data TMA</h2><form id="data-form" class="space-y-4"><div><label for="tma-depan" class="block text-sm font-medium text-gray-600 mb-1">TMA Depan (cm)</label><input type="number" id="tma-depan" placeholder="150" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></div><div><label for="tma-belakang" class="block text-sm font-medium text-gray-600 mb-1">TMA Belakang (cm)</label><input type="number" id="tma-belakang" placeholder="120" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></div><button type="submit" class="w-full btn-primary font-semibold py-2.5 px-4 rounded-lg shadow-sm">Simpan Data</button></form><div id="success-message" class="mt-4 text-center text-green-600 font-medium opacity-0 transition-opacity">Data berhasil disimpan!</div></div>
                                <div class="card p-6"><h2 class="text-xl font-semibold text-gray-700 border-b pb-3 mb-4">Rekapitulasi Data</h2><div class="overflow-x-auto max-h-96"><table class="min-w-full text-sm text-left"><thead class="bg-gray-50 sticky top-0"><tr><th class="p-3 font-semibold text-gray-600">Waktu</th><th class="p-3 font-semibold text-gray-600">Depan (cm)</th><th class="p-3 font-semibold text-gray-600">Belakang (cm)</th></tr></thead><tbody id="recap-table-body"></tbody></table></div></div>
                            </div>
                            <div class="lg:col-span-2 space-y-8">
                                <div class="card p-6"><h2 class="text-xl font-semibold text-gray-700 mb-4">Grafik Tren Ketinggian Air</h2><div class="h-full min-h-[400px]"><canvas id="main-chart"></canvas></div></div>
                                <div class="card p-6">
                                    <div class="flex items-center gap-3 border-b pb-3 mb-4">
                                        <i data-lucide="sparkles" class="text-indigo-600"></i>
                                        <h2 class="text-xl font-semibold text-gray-700">Analisis AI Otomatis</h2>
                                    </div>
                                    <div id="ai-loader" class="hidden flex items-center gap-3 text-gray-500"><div class="loader !w-5 !h-5 !border-2"></div><span>Menganalisis data...</span></div>
                                    <div id="ai-analysis-result" class="text-gray-600 font-inter text-sm leading-relaxed"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="dashboard-loader" class="flex justify-center items-center py-20"><div class="loader"></div></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Firebase SDK & App Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const firebaseConfig = {
          apiKey: "AIzaSyAXUb6u_97uzbF341IAoBuf-KVHIch34QY",
          authDomain: "tma-monitor.firebaseapp.com",
          projectId: "tma-monitor",
          storageBucket: "tma-monitor.appspot.com",
          messagingSenderId: "97357707697",
          appId: "1:97357707697:web:c6908232c0304a421d6590",
          measurementId: "G-TMWEH87J1D"
        };
        
        const appId = firebaseConfig.appId;

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let currentUserId = null; let tmaData = []; let unsubscribeFirestore = null;
        const landingSection = document.getElementById('landing-page-section');
        const authSection = document.getElementById('auth-section');
        const dashboardSection = document.getElementById('dashboard-app-section');
        
        const aiAnalysisResult = document.getElementById('ai-analysis-result');
        const aiLoader = document.getElementById('ai-loader');
        let isAnalyzing = false;

        async function triggerAiAnalysis() {
            if (isAnalyzing) return;

            if (tmaData.length < 2) {
                aiAnalysisResult.innerHTML = `<div class="text-gray-500">Butuh minimal 2 data untuk analisis AI.</div>`;
                aiLoader.classList.add('hidden');
                aiAnalysisResult.classList.remove('hidden');
                return;
            }

            isAnalyzing = true;
            aiAnalysisResult.classList.add('hidden');
            aiLoader.classList.remove('hidden');

            const formattedData = tmaData.map(d => 
                `Waktu: ${new Date(d.timestamp).toLocaleString('id-ID')}, Ketinggian Air: ${d.depan} cm`
            ).join('\n');

            const prompt = `Anda adalah seorang ahli hidrologi. Berdasarkan data ketinggian muka air (TMA Depan) berikut, berikan analisis singkat (maksimal 3 poin) menggunakan markdown. Fokus pada tren, anomali, dan kesimpulan.\n\n**Data:**\n${formattedData}`;

            try {
                const response = await fetch('/.netlify/functions/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: prompt })
                });

                if (!response.ok) throw new Error(`API request failed`);

                const result = await response.json();
                const analysisText = result.candidates[0].content.parts[0].text;
                
                let htmlResult = analysisText
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\n/g, '<br>');

                aiAnalysisResult.innerHTML = `<div class="ai-analysis-box p-4 rounded-md">${htmlResult}</div>`;

            } catch (error) {
                console.error("Analysis Error:", error);
                aiAnalysisResult.innerHTML = `<div class="text-red-500">Gagal mendapatkan analisis AI.</div>`;
            } finally {
                isAnalyzing = false;
                aiLoader.classList.add('hidden');
                aiAnalysisResult.classList.remove('hidden');
            }
        }

        const welcomeMessage = document.getElementById('welcome-message');
        const showView = (viewName) => {
            landingSection.classList.add('hidden'); authSection.classList.add('hidden'); dashboardSection.classList.add('hidden');
            const view = document.getElementById(viewName);
            if (view) { view.classList.remove('hidden'); }
            lucide.createIcons();
        };
        const showLoginBtns = document.querySelectorAll('.show-login-btn');
        const showRegisterBtns = document.querySelectorAll('.show-register-btn');
        const backToLandingBtn = document.getElementById('back-to-landing-btn');
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const showAuthPage = (defaultTab = 'login') => {
            showView('auth-section');
            if (defaultTab === 'login') {
                loginForm.classList.remove('hidden'); registerForm.classList.add('hidden');
                loginTab.dataset.state = 'active'; registerTab.dataset.state = 'inactive';
            } else {
                loginForm.classList.add('hidden'); registerForm.classList.remove('hidden');
                loginTab.dataset.state = 'inactive'; registerTab.dataset.state = 'active';
            }
        };
        showLoginBtns.forEach(btn => btn.addEventListener('click', () => showAuthPage('login')));
        showRegisterBtns.forEach(btn => btn.addEventListener('click', () => showAuthPage('register')));
        backToLandingBtn.addEventListener('click', () => showView('landing-page-section'));
        loginTab.addEventListener('click', () => showAuthPage('login'));
        registerTab.addEventListener('click', () => showAuthPage('register'));
        
        const passwordToggles = document.querySelectorAll('.password-toggle');
        passwordToggles.forEach(toggle => {
            toggle.addEventListener('click', () => {
                const parent = toggle.closest('.relative');
                const passwordInput = parent.querySelector('input[type="password"], input[type="text"]');
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggle.innerHTML = '<i data-lucide="eye-off" class="w-5 h-5"></i>';
                } else {
                    passwordInput.type = 'password';
                    toggle.innerHTML = '<i data-lucide="eye" class="w-5 h-5"></i>';
                }
                lucide.createIcons();
            });
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUserId = user.uid; const displayName = user.displayName || "Pengguna";
                welcomeMessage.textContent = `Selamat datang, ${displayName}!`;
                showView('dashboard-app-section');
                listenToTmaData(currentUserId);
            } else {
                currentUserId = null; showView('landing-page-section');
                if (unsubscribeFirestore) { unsubscribeFirestore(); unsubscribeFirestore = null; }
                tmaData = [];
            }
        });
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = registerForm['register-name'].value; const email = registerForm['register-email'].value; const password = registerForm['register-password'].value;
            const errorEl = document.getElementById('register-error'); const button = registerForm.querySelector('button');
            button.disabled = true; button.textContent = 'Mendaftarkan...'; errorEl.classList.add('hidden');
            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => updateProfile(userCredential.user, { displayName: name }))
                .catch((error) => { errorEl.textContent = getAuthErrorMessage(error.code); errorEl.classList.remove('hidden'); })
                .finally(() => { button.disabled = false; button.textContent = 'Daftar Akun'; });
        });
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = loginForm['login-email'].value; const password = loginForm['login-password'].value;
            const errorEl = document.getElementById('login-error'); const button = loginForm.querySelector('button');
            button.disabled = true; button.textContent = 'Memproses...'; errorEl.classList.add('hidden');
            signInWithEmailAndPassword(auth, email, password)
                .catch((error) => { errorEl.textContent = getAuthErrorMessage(error.code); errorEl.classList.remove('hidden'); })
                .finally(() => { button.disabled = false; button.textContent = 'Masuk'; });
        });
        document.getElementById('logout-button').addEventListener('click', () => signOut(auth));
        function getAuthErrorMessage(code) {
            const messages = { 'auth/invalid-email': 'Format email tidak valid.', 'auth/user-not-found': 'Pengguna tidak ditemukan.', 'auth/wrong-password': 'Kata sandi salah.', 'auth/email-already-in-use': 'Email sudah terdaftar.', 'auth/weak-password': 'Kata sandi terlalu lemah.', 'auth/too-many-requests': 'Terlalu banyak percobaan.' };
            return messages[code] || 'Terjadi kesalahan.';
        }
        const dashboardLoader = document.getElementById('dashboard-loader');
        const dashboardContent = document.getElementById('dashboard-content');
        function listenToTmaData(userId) {
            dashboardLoader.classList.remove('hidden');
            dashboardContent.classList.add('hidden');
            const dataCollectionPath = `/artifacts/${appId}/users/${userId}/tma_entries`;
            const dataCollectionRef = collection(db, dataCollectionPath);
            
            unsubscribeFirestore = onSnapshot(dataCollectionRef, (snapshot) => {
                let rawData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                tmaData = rawData.sort((a, b) => a.timestamp - b.timestamp);
                updateDashboardUI();
                triggerAiAnalysis();
                dashboardLoader.classList.add('hidden');
                dashboardContent.classList.remove('hidden');
            }, (error) => {
                console.error("Firestore Error:", error);
                document.getElementById('welcome-message').textContent = "Gagal memuat data. Periksa koneksi dan izin database.";
                dashboardLoader.classList.add('hidden');
            });
        }
        document.getElementById('data-form').addEventListener('submit', async (e) => {
            e.preventDefault(); const form = e.target; const depan = parseFloat(form['tma-depan'].value); const belakang = parseFloat(form['tma-belakang'].value);
            if (currentUserId && !isNaN(depan) && !isNaN(belakang)) {
                const dataCollectionPath = `/artifacts/${appId}/users/${currentUserId}/tma_entries`;
                await addDoc(collection(db, dataCollectionPath), { timestamp: Date.now(), depan, belakang });
                form.reset(); const successMsg = document.getElementById('success-message');
                successMsg.classList.remove('opacity-0'); setTimeout(() => successMsg.classList.add('opacity-0'), 2000);
            }
        });
        let mainChart; const recapTableBody = document.getElementById('recap-table-body');
        function updateDashboardUI() { renderRecapTable(); renderMainChart(); }
        function formatTimestamp(ts) { return new Date(ts).toLocaleString('id-ID', { dateStyle: 'medium', timeStyle: 'short' }); }
        function renderRecapTable() {
            recapTableBody.innerHTML = tmaData.length === 0 ? `<tr><td colspan="3" class="p-4 text-center text-gray-500">Belum ada data.</td></tr>` : [...tmaData].reverse().map(d => `<tr class="hover:bg-gray-50"><td class="p-3">${formatTimestamp(d.timestamp)}</td><td class="p-3">${d.depan}</td><td class="p-3">${d.belakang}</td></tr>`).join('');
        }
        function renderMainChart() {
            const ctx = document.getElementById('main-chart').getContext('2d');
            if (mainChart) mainChart.destroy();
            mainChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: tmaData.map(d => new Date(d.timestamp).toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' })),
                    datasets: [{
                        label: 'Ketinggian Air (cm)',
                        data: tmaData.map(d => d.depan),
                        backgroundColor: 'rgba(59, 130, 246, 0.75)',
                        borderColor: 'rgb(59, 130, 246)',
                        borderWidth: 1,
                        borderRadius: 4,
                        barThickness: 12,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            suggestedMax: 250,
                            grid: { color: '#e5e7eb' },
                            ticks: { 
                                color: '#6b7280',
                                font: { size: 12 }
                            }
                        },
                        x: {
                            grid: { display: false },
                            ticks: {
                                color: '#6b7280',
                                font: { size: 12 },
                                autoSkip: true,
                                maxTicksLimit: window.innerWidth < 768 ? 4 : 8,
                                maxRotation: 0,
                            }
                        }
                    },
                    plugins: {
                        legend: {
                           display: false
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: '#111827',
                            titleAlign: 'center',
                            bodyAlign: 'center',
                            padding: 10,
                            cornerRadius: 6,
                            displayColors: false,
                            callbacks: {
                                title: function(tooltipItems) {
                                    return tooltipItems[0].label;
                                },
                                label: function(context) {
                                    return `${context.parsed.y} cm`;
                                }
                            }
                        }
                    }
                }
            });
        }
        lucide.createIcons();
    </script>
</body>
</html>
